<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>AVRliberty: XModem Transmit/Receive Implementation with CRC and 1K support (xmodem.c)</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>XModem Transmit/Receive Implementation with CRC and 1K support (xmodem.c)<br/>
<small>
[<a class="el" href="group__general.html">General Libraries</a>]</small>
</h1><table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#gab3796cca360697d3658162dba5965e28">SOH</a>&nbsp;&nbsp;&nbsp;0x01</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#gaacd744a917e61146ec8b7175b4761683">STX</a>&nbsp;&nbsp;&nbsp;0x02</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#gaa3210a5256085e136fed7897ae93a756">EOT</a>&nbsp;&nbsp;&nbsp;0x04</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#ga6f6489887e08bff4887d0bc5dcf214d8">ACK</a>&nbsp;&nbsp;&nbsp;0x06</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#ga7ff3e502ffb5d509612c6c6741de45cc">NAK</a>&nbsp;&nbsp;&nbsp;0x15</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#ga427a40e102258055c72607bf7b604549">CAN</a>&nbsp;&nbsp;&nbsp;0x18</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#gad71688b7a4be6d66c30cfde4dfa7a4da">CTRLZ</a>&nbsp;&nbsp;&nbsp;0x1A</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#gad7a35ac3cf7b51d4fbccc04193c59d90">XMODEM_TIMEOUT_DELAY</a>&nbsp;&nbsp;&nbsp;1000</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#gadce7928a7004043f0a68202eaa8af785">XMODEM_RETRY_LIMIT</a>&nbsp;&nbsp;&nbsp;16</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#gabd46b7b06070ab9ec230b1fb14becff9">XMODEM_ERROR_REMOTECANCEL</a>&nbsp;&nbsp;&nbsp;-1</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#gaeb938b2eb4fada05ced27a4e350b18f7">XMODEM_ERROR_OUTOFSYNC</a>&nbsp;&nbsp;&nbsp;-2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#ga72e930836dfa0ed9e5dcd87e643e001e">XMODEM_ERROR_RETRYEXCEED</a>&nbsp;&nbsp;&nbsp;-3</td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#ga1fca0ca0919b7b2e226a3eb4c14fd405">xmodemInit</a> (void(*sendbyte_func)(unsigned char c), int(*getbyte_func)(void))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">initialize xmodem stream I/O routines  <a href="#ga1fca0ca0919b7b2e226a3eb4c14fd405"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#ga5e7b235a030965f49bfebdd68ebb8ad1">xmodemReceive</a> (int(*write)(unsigned char *buffer, int size))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">xmodem receive  <a href="#ga5e7b235a030965f49bfebdd68ebb8ad1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">long&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#ga0e22eba967b35679b45eb66853091a54">xmodemTransmit</a> (int(*read)(unsigned char *buffer, int size))</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">xmodem transmit  <a href="#ga0e22eba967b35679b45eb66853091a54"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#gad39b103f4ddd4eb3b82890d5fb62c967">xmodemCrcCheck</a> (int crcflag, const unsigned char *buffer, int size)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">xmodem CRC/checksum error checking  <a href="#gad39b103f4ddd4eb3b82890d5fb62c967"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#ga18d8ec5d7e332130aea0fa03c0dac124">xmodemInTime</a> (unsigned short timeout)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">get incoming character (wait for timeout)  <a href="#ga18d8ec5d7e332130aea0fa03c0dac124"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__xmodem.html#ga573be75e094d6e52a5c35aeec4d64aa6">xmodemInFlush</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">flush incoming character stream  <a href="#ga573be75e094d6e52a5c35aeec4d64aa6"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include &quot;<a class="code" href="xmodem_8h.html" title="XModem Transmit/Receive Implementation with CRC and 1K support.">xmodem.h</a>&quot;</span> 
</pre></div> <dl class="user"><dt><b>Overview</b></dt><dd>This XModem implementation supports both 128b and 1K packets with or without CRC checking. The xmodem library must be initialized to use a particular I/O stream by passing appropriate getbyte() and sendbyte() functions to <a class="el" href="group__xmodem.html#ga1fca0ca0919b7b2e226a3eb4c14fd405" title="initialize xmodem stream I/O routines">xmodemInit()</a>. The xmodem transfer routines also expect function pointers to read and write data blocks on the local system. While this use of function pointers increases code size, it has great adaptability. The generalized read/write data functions mean that it is easy to pipe data to/from any storage device like EEPROMs or flash cards, rather than being limited to just processor RAM. </dd></dl>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga6f6489887e08bff4887d0bc5dcf214d8"></a><!-- doxytag: member="xmodem.h::ACK" ref="ga6f6489887e08bff4887d0bc5dcf214d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACK&nbsp;&nbsp;&nbsp;0x06</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00040">40</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga427a40e102258055c72607bf7b604549"></a><!-- doxytag: member="xmodem.h::CAN" ref="ga427a40e102258055c72607bf7b604549" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CAN&nbsp;&nbsp;&nbsp;0x18</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00042">42</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad71688b7a4be6d66c30cfde4dfa7a4da"></a><!-- doxytag: member="xmodem.h::CTRLZ" ref="gad71688b7a4be6d66c30cfde4dfa7a4da" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CTRLZ&nbsp;&nbsp;&nbsp;0x1A</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00043">43</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaa3210a5256085e136fed7897ae93a756"></a><!-- doxytag: member="xmodem.h::EOT" ref="gaa3210a5256085e136fed7897ae93a756" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EOT&nbsp;&nbsp;&nbsp;0x04</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00039">39</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga7ff3e502ffb5d509612c6c6741de45cc"></a><!-- doxytag: member="xmodem.h::NAK" ref="ga7ff3e502ffb5d509612c6c6741de45cc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NAK&nbsp;&nbsp;&nbsp;0x15</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00041">41</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gab3796cca360697d3658162dba5965e28"></a><!-- doxytag: member="xmodem.h::SOH" ref="gab3796cca360697d3658162dba5965e28" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SOH&nbsp;&nbsp;&nbsp;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00037">37</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaacd744a917e61146ec8b7175b4761683"></a><!-- doxytag: member="xmodem.h::STX" ref="gaacd744a917e61146ec8b7175b4761683" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STX&nbsp;&nbsp;&nbsp;0x02</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00038">38</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gaeb938b2eb4fada05ced27a4e350b18f7"></a><!-- doxytag: member="xmodem.h::XMODEM_ERROR_OUTOFSYNC" ref="gaeb938b2eb4fada05ced27a4e350b18f7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XMODEM_ERROR_OUTOFSYNC&nbsp;&nbsp;&nbsp;-2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00051">51</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gabd46b7b06070ab9ec230b1fb14becff9"></a><!-- doxytag: member="xmodem.h::XMODEM_ERROR_REMOTECANCEL" ref="gabd46b7b06070ab9ec230b1fb14becff9" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XMODEM_ERROR_REMOTECANCEL&nbsp;&nbsp;&nbsp;-1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00050">50</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="ga72e930836dfa0ed9e5dcd87e643e001e"></a><!-- doxytag: member="xmodem.h::XMODEM_ERROR_RETRYEXCEED" ref="ga72e930836dfa0ed9e5dcd87e643e001e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XMODEM_ERROR_RETRYEXCEED&nbsp;&nbsp;&nbsp;-3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00052">52</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gadce7928a7004043f0a68202eaa8af785"></a><!-- doxytag: member="xmodem.h::XMODEM_RETRY_LIMIT" ref="gadce7928a7004043f0a68202eaa8af785" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XMODEM_RETRY_LIMIT&nbsp;&nbsp;&nbsp;16</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00047">47</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<a class="anchor" id="gad7a35ac3cf7b51d4fbccc04193c59d90"></a><!-- doxytag: member="xmodem.h::XMODEM_TIMEOUT_DELAY" ref="gad7a35ac3cf7b51d4fbccc04193c59d90" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XMODEM_TIMEOUT_DELAY&nbsp;&nbsp;&nbsp;1000</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="xmodem_8h_source.html#l00046">46</a> of file <a class="el" href="xmodem_8h_source.html">xmodem.h</a>.</p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="gad39b103f4ddd4eb3b82890d5fb62c967"></a><!-- doxytag: member="xmodem.h::xmodemCrcCheck" ref="gad39b103f4ddd4eb3b82890d5fb62c967" args="(int crcflag, const unsigned char *buffer, int size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xmodemCrcCheck </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>crcflag</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const unsigned char *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>size</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>xmodem CRC/checksum error checking </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00200">200</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga573be75e094d6e52a5c35aeec4d64aa6"></a><!-- doxytag: member="xmodem.h::xmodemInFlush" ref="ga573be75e094d6e52a5c35aeec4d64aa6" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xmodemInFlush </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>flush incoming character stream </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00244">244</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga1fca0ca0919b7b2e226a3eb4c14fd405"></a><!-- doxytag: member="xmodem.h::xmodemInit" ref="ga1fca0ca0919b7b2e226a3eb4c14fd405" args="(void(*sendbyte_func)(unsigned char c), int(*getbyte_func)(void))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void xmodemInit </td>
          <td>(</td>
          <td class="paramtype">void(*)(unsigned char c)&nbsp;</td>
          <td class="paramname"> <em>sendbyte_func</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int(*)(void)&nbsp;</td>
          <td class="paramname"> <em>getbyte_func</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>initialize xmodem stream I/O routines </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00031">31</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga18d8ec5d7e332130aea0fa03c0dac124"></a><!-- doxytag: member="xmodem.h::xmodemInTime" ref="ga18d8ec5d7e332130aea0fa03c0dac124" args="(unsigned short timeout)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int xmodemInTime </td>
          <td>(</td>
          <td class="paramtype">unsigned short&nbsp;</td>
          <td class="paramname"> <em>timeout</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>get incoming character (wait for timeout) </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00234">234</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga5e7b235a030965f49bfebdd68ebb8ad1"></a><!-- doxytag: member="xmodem.h::xmodemReceive" ref="ga5e7b235a030965f49bfebdd68ebb8ad1" args="(int(*write)(unsigned char *buffer, int size))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long xmodemReceive </td>
          <td>(</td>
          <td class="paramtype">int(*)(unsigned char *buffer, int size)&nbsp;</td>
          <td class="paramname"> <em>write</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>xmodem receive </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00038">38</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
<a class="anchor" id="ga0e22eba967b35679b45eb66853091a54"></a><!-- doxytag: member="xmodem.h::xmodemTransmit" ref="ga0e22eba967b35679b45eb66853091a54" args="(int(*read)(unsigned char *buffer, int size))" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long xmodemTransmit </td>
          <td>(</td>
          <td class="paramtype">int(*)(unsigned char *buffer, int size)&nbsp;</td>
          <td class="paramname"> <em>read</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>xmodem transmit </p>

<p>Definition at line <a class="el" href="xmodem_8c_source.html#l00178">178</a> of file <a class="el" href="xmodem_8c_source.html">xmodem.c</a>.</p>

</div>
</div>
</div>
<hr size="1"/><address style="text-align: right;"><small>Generated on Tue Sep 22 16:50:42 2009 for AVRliberty by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
