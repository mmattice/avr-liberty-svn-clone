<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Procyon AVRlib: STX/ETX Packet Protocol Library (stxetx.c)</title>
<link href="dox.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.2 -->
<div class="qindex"><a class="qindex" href="main.html">Main&nbsp;Page</a> | <a class="qindex" href="modules.html">Modules</a> | <a class="qindex" href="annotated.html">Data&nbsp;Structures</a> | <a class="qindex" href="dirs.html">Directories</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Data&nbsp;Fields</a> | <a class="qindex" href="globals.html">Globals</a> | <a class="qindex" href="pages.html">Related&nbsp;Pages</a></div>
<h1>STX/ETX Packet Protocol Library (stxetx.c)<br>
<small>
[<a class="el" href="group__general.html">General Libraries</a>]</small>
</h1><hr><a name="_details"></a><h2>Detailed Description</h2>
<div class="fragment"><pre class="fragment"><span class="preprocessor"> #include "<a class="code" href="stxetx_8h.html">stxetx.h</a>"</span> 
</pre></div> <dl compact><dt><b>Overview</b></dt><dd>This library provides functions needed to transmit and receive STX/ETX packets over any interface which can send and receive bytes.  STX/ETX is a simple packet protocol for serial data streams and offers packetization, type tagging, and checksum protection for user data.  Common uses of STX/ETX might include radio communications were it can improve data reliability over lossy channels.  STX/ETX may also be used effectively anywhere multiple access to the communication medium is required.  The packets can be made to contain destination addresses or routing information as well as data.</dd></dl>
<dl compact><dt><b>STX/ETX Details</b></dt><dd>STX/ETX is a simple packet protocol that can be wrapped around user data for one or more of the following reasons: 1. packetization is needed<ul>
<li>Using packets can be helpful if your data naturally forms little "bunches" or if different types of data must be sent over the same channel (a serial cable, for example). If your data forms "bunches", you can send user data inside STX/ETX packets with a predetermined structure, like an array of A/D conversion results. If you need a way to tell the receiver what kind of data you're sending, you can use the TYPE field in the STX/ETX packet. 2. error checking is needed</li><li>STX/ETX packets will add a checksum to your data. This allows the receiver to verify that data was received correctly and is error-free. Packets which are corrupted in transmission and fail the the checksum test are automatically discarded. Error checking is especially useful when the data transmission channel is unreliable or noisy (examples: radio, infrared, long cables, etc)</li></ul>
</dd></dl>
STX/ETX packets have the following structure:<p>
[STX][status][type][length][user data...][checksum][ETX]<p>
All fields are 1 byte except for user data which may be 0-255 bytes. Uppercase fields are constant (STX=0x02, ETX=0x03), lowercase fields vary. The length field is the number of bytes in the user data area. The checksum is the 8-bit sum of all bytes between but not including STX/ETX. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga7" doxytag="stxetx::STX"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STX</b>&nbsp;&nbsp;&nbsp;0x02</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga8" doxytag="stxetx::ETX"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>ETX</b>&nbsp;&nbsp;&nbsp;0x03</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga9" doxytag="stxetx::STXETX_HEADERLENGTH"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STXETX_HEADERLENGTH</b>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga10" doxytag="stxetx::STXETX_TRAILERLENGTH"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STXETX_TRAILERLENGTH</b>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga11" doxytag="stxetx::STXETX_STATUSOFFSET"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STXETX_STATUSOFFSET</b>&nbsp;&nbsp;&nbsp;1</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga12" doxytag="stxetx::STXETX_TYPEOFFSET"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STXETX_TYPEOFFSET</b>&nbsp;&nbsp;&nbsp;2</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga13" doxytag="stxetx::STXETX_LENGTHOFFSET"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STXETX_LENGTHOFFSET</b>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga14" doxytag="stxetx::STXETX_DATAOFFSET"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STXETX_DATAOFFSET</b>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga15" doxytag="stxetx::STXETX_CHECKSUMOFFSET"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STXETX_CHECKSUMOFFSET</b>&nbsp;&nbsp;&nbsp;4</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga16" doxytag="stxetx::STXETX_NOETXSTXCHECKSUM"></a>
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>STXETX_NOETXSTXCHECKSUM</b>&nbsp;&nbsp;&nbsp;3</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga0" doxytag="stxetx::stxetxInit"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stxetx.html#ga0">stxetxInit</a> (void(*dataout_func)(unsigned char data))</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialize STX/ETX packet protocol library. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga1" doxytag="stxetx::stxetxSend"></a>
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stxetx.html#ga1">stxetxSend</a> (unsigned char status, unsigned char type, unsigned char datalength, unsigned char *dataptr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Send/Create STX/ETX packet. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga2" doxytag="stxetx::stxetxProcess"></a>
unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stxetx.html#ga2">stxetxProcess</a> (<a class="el" href="structstruct__cBuffer.html">cBuffer</a> *rxBuffer)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process a buffer containing STX/ETX packets. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga3" doxytag="stxetx::stxetxGetRxPacketStatus"></a>
unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stxetx.html#ga3">stxetxGetRxPacketStatus</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the received packet's status. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga4" doxytag="stxetx::stxetxGetRxPacketType"></a>
unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stxetx.html#ga4">stxetxGetRxPacketType</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the received packet's type. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga5" doxytag="stxetx::stxetxGetRxPacketDatalength"></a>
unsigned char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stxetx.html#ga5">stxetxGetRxPacketDatalength</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns the received packet's datalength. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ga6" doxytag="stxetx::stxetxGetRxPacketData"></a>
unsigned char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__stxetx.html#ga6">stxetxGetRxPacketData</a> (void)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Returns pointer to the received packet's data. <br></td></tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Sun Oct 29 03:41:09 2006 for Procyon AVRlib by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.2 </small></address>
</body>
</html>
